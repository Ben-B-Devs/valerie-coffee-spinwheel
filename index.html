<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Valerie’s Coffee Spinwheel</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --blue-dark:#1f3a5f;
  --blue-muted:#5b7fa6;
  --off-white:#f4f6f8;
}

*{box-sizing:border-box}

body{
  margin:0;
  min-height:100vh;
  background:var(--off-white);
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
  color:var(--blue-dark);
}

.app{
  width:100%;
  max-width:460px;
  padding:22px 18px 32px;
  text-align:center;
}

h1{
  font-size:clamp(26px,6vw,34px);
  margin-bottom:6px;
}

.subtitle{
  font-size:clamp(15px,4vw,18px);
  color:#3f5875;
  margin-bottom:10px;
}

.helper{
  font-size:14px;
  color:#5b6f88;
  margin-bottom:22px;
  line-height:1.4;
}

.wheel-wrapper{
  position:relative;
  width:min(82vw,360px);
  aspect-ratio:1/1;
  margin:0 auto 22px;
}

canvas{
  width:100%;
  height:100%;
  background:#fff;
  border-radius:50%;
  box-shadow:0 6px 18px rgba(0,0,0,0.15);
}

.marker{
  position:absolute;
  top:-4px;
  left:50%;
  transform:translateX(-50%);
  width:0;
  height:0;
  border-left:16px solid transparent;
  border-right:16px solid transparent;
  border-top:28px solid var(--blue-muted);
  z-index:10;
}

button{
  width:100%;
  max-width:260px;
  padding:15px;
  font-size:17px;
  font-weight:600;
  background:var(--blue-dark);
  color:#fff;
  border:none;
  border-radius:10px;
  cursor:pointer;
}

button:active{transform:scale(0.98)}

.result{
  margin-top:22px;
}

.result .name{
  font-size:21px;
  font-weight:700;
}

.result .city{
  margin-top:6px;
  font-size:17px;
  font-weight:700;
  color:#3f5875;
}

.result .address{
  margin-top:4px;
  font-size:14px;
  color:#6b7f94;
}

.result .directions{
  margin-top:6px;
  font-size:14px;
}

.result .directions a{
  color:var(--blue-muted);
  text-decoration:none;
  font-weight:600;
}

.result .directions a:hover{
  text-decoration:underline;
}

.confetti{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:999;
}

.confetti span{
  position:absolute;
  width:8px;
  height:8px;
  border-radius:2px;
  animation:burst 900ms ease-out forwards;
}

@keyframes burst{
  to{
    transform:translate(var(--dx),var(--dy)) rotate(720deg);
    opacity:0;
  }
}
</style>
</head>

<body>

<div class="app">
  <h1>Valerie’s Coffee Spinwheel</h1>
  <div class="subtitle">A fun way to pick a place to meet!</div>
  <div class="helper">
    Give it a spin and see what sounds good.<br>
    If it’s not the vibe, feel free to spin again.
  </div>

  <div class="wheel-wrapper">
    <div class="marker"></div>
    <canvas id="wheel"></canvas>
  </div>

  <button onclick="spin()">Spin the wheel</button>

  <div class="result" id="result"></div>
</div>

<div class="confetti" id="confetti"></div>

<script>
const places=[
  {
    name:"Sugar & Spice Cafe",
    city:"Santa Fe Springs",
    address:"14565 Valley View Ave Suite J, Santa Fe Springs, CA 90670",
    map:"https://maps.app.goo.gl/GLxne7PFwE4L9oSK7"
  },
  {
    name:"Zen’s Tea Room",
    city:"Santa Fe Springs",
    address:"12631 Imperial Hwy Ste E119, Santa Fe Springs, CA 90670",
    map:"https://maps.app.goo.gl/tpXwYGWHHo8tjX2aA"
  },
  {
    name:"Holos Coffee",
    city:"Artesia",
    address:"17627 Pioneer Blvd, Artesia, CA 90701",
    map:"https://share.google/B83Zj8D7T7TbFIS89"
  },
  {
    name:"Cream & Sugar Cafe",
    city:"La Mirada",
    address:"12826 La Mirada Blvd, La Mirada, CA 90638",
    map:"https://maps.app.goo.gl/fWeJSix2X2xdCQq97"
  },
  {
    name:"Tierra Mia Coffee",
    city:"Pico Rivera",
    address:"9220 Slauson Ave, Pico Rivera, CA 90660",
    map:"https://share.google/udvUcehE3rgt5x9Se"
  },
  {
    name:"Teaish & Coffee",
    city:"Buena Park",
    address:"7856 Commonwealth Ave, Buena Park, CA 90621",
    map:"https://share.google/MwCeCqibqKl5nH0u9"
  }
];

const canvas=document.getElementById("wheel");
const ctx=canvas.getContext("2d");

let size,radius,sliceAngle,spinning=false;

function resize(){
  size=canvas.parentElement.offsetWidth*2;
  canvas.width=canvas.height=size;
  radius=size/2;
  sliceAngle=(2*Math.PI)/places.length;
  draw();
}

function draw(){
  ctx.clearRect(0,0,size,size);
  ctx.save();
  ctx.translate(radius,radius);
  ctx.rotate(-Math.PI/2);

  places.forEach((p,i)=>{
    const start=i*sliceAngle;
    const end=start+sliceAngle;

    ctx.beginPath();
    ctx.moveTo(0,0);
    ctx.arc(0,0,radius,start,end);
    ctx.fillStyle=i%2?"#e9eef3":"#fff";
    ctx.fill();
    ctx.strokeStyle="#cfd6de";
    ctx.stroke();

    ctx.save();
    ctx.rotate(start+sliceAngle/2);
    const font=Math.max(radius*0.065,18);
    ctx.textAlign="center";
    ctx.fillStyle="#1f3a5f";
    ctx.font=`600 ${font}px Arial`;

    p.name.split(" ").forEach((w,idx)=>{
      ctx.fillText(w,radius*0.7,(idx-(p.name.split(" ").length-1)/2)*font*1.1);
    });

    ctx.restore();
  });

  ctx.restore();
}

function spin(){
  if(spinning) return;
  spinning=true;
  document.getElementById("result").innerHTML="";

  const index=Math.floor(Math.random()*places.length);
  const sliceDeg=360/places.length;
  const targetDeg=-(index*sliceDeg+sliceDeg/2);
  const spinDeg=targetDeg+360*5;
  const start=performance.now();
  const duration=2800;

  function animate(t){
    const p=Math.min((t-start)/duration,1);
    const ease=1-Math.pow(1-p,3);
    canvas.style.transform=`rotate(${spinDeg*ease}deg)`;
    if(p<1) requestAnimationFrame(animate);
    else{
      spinning=false;
      reveal(index);
    }
  }
  requestAnimationFrame(animate);
}

function reveal(i){
  if(navigator.vibrate) navigator.vibrate(10);
  burstConfetti();
  const p=places[i];
  document.getElementById("result").innerHTML=
    `<div class="name">${p.name}</div>
     <div class="city">${p.city}</div>
     <div class="address">${p.address}</div>
     <div class="directions">
       <a href="${p.map}" target="_blank" rel="noopener">Directions</a>
     </div>`;
}

function burstConfetti(){
  const c=document.getElementById("confetti");
  c.innerHTML="";
  const cx=window.innerWidth/2;
  const cy=window.innerHeight/2;

  for(let i=0;i<70;i++){
    const s=document.createElement("span");
    const angle=Math.random()*Math.PI*2;
    const dist=100+Math.random()*200;

    s.style.left=cx+"px";
    s.style.top=cy+"px";
    s.style.background=Math.random()>.5?"#1f3a5f":"#5b7fa6";
    s.style.setProperty("--dx",(Math.cos(angle)*dist)+"px");
    s.style.setProperty("--dy",(Math.sin(angle)*dist)+"px");

    c.appendChild(s);
  }

  setTimeout(()=>c.innerHTML="",1000);
}

window.addEventListener("resize",resize);
resize();
</script>

</body>
</html>
